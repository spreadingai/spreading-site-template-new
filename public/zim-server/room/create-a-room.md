# 创建房间
--- 

## 描述

开发者可以调用此接口创建房间，创建房间时支持设置自定义的房间属性。一个房间最多可设置 20 个房间属性，如果需要增加房间属性数量上限，请联系 ZEGO 技术支持。

## 接口原型

- 请求方法： POST
- 请求地址： `https://zim-api.zego.im/?Action=CreateRoom`
- 传输协议： HTTPS
- 调用频率限制： 20 次/秒。

## 请求参数

以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表请参考 [调用方式 - 公共请求参数](/zim-server/accessing-server-apis#2-公共参数)。

| 参数              | 类型                          | 是否必选 | 描述                                                                                   |
|-------------------|-----------------------------|---------|----------------------------------------------------------------------------------------|
| FromUserId        | String                      | 是      | 操作者，需要是已注册状态，该用户不会自动加入房间。仅支持数字，英文字符和 '!'，'#'，'$'，'%'，'&'，'('，')'，'+'，'-'，':'，';'，'\<'，'='，'.'，'>'，'?'，'@'，'['，']'，'^'，'_'，' '，'{'，'}'，'|'，'~'。                                      |
| RoomId            | String                      | 是      | 房间 ID 。仅支持数字，英文字符和 '!'，'#'，'$'，'%'，'&'，'('，')'，'+'，'-'，':'，';'，'\<'，'='，'.'，'>'，'?'，'@'，'['，']'，'^'，'_'，' '，'{'，'}'，'|'，'~'。                                                                                 |
| RoomName          | String                      | 否      | 房间名称。最大长度不超过 64 字节的字符串。                                                                               |
| DestroyDelayTime  | Number                      | 否      | 房间人数为 0 时，房间延迟销毁时间，单位为秒。最长房间延迟销毁时间默认为 10800 秒。 <Warning title="注意">当房间延迟销毁时，房间属性和房间用户属性默认不保留。如果需要保留，请联系 ZEGO 技术支持。</Warning>|
| Attributes        | Array of [CreateRoomAttribute](#CreateRoomAttribute) | 否      | 要添加的属性信息。                                                                       |

<a id="CreateRoomAttribute"></a>
**CreateRoomAttribute 结构如下：**

| 参数       | 类型    | 是否必选 | 描述                                                                                                         |
|------------|---------|---------|--------------------------------------------------------------------------------------------------------------|
| Key        | String  | 是      | 房间属性 key。                                                                                             |
| Value      | String  | 是      | 房间属性 value。                                                                        |
| AutoDelete | Number  | 否      | 用户退出时，是否自动删除， 0 ：不自动删除， 1 ：自动删除。创建房间时不会把 FromUserId 加入到房间，只会在其先进入房间，然后再退出时触发删除操作。 |

## 请求示例

- 请求地址 URL：

```json
https://zim-api.zego.im/?Action=CreateRoom
&<公共请求参数>
```

- 请求消息体：
```json
{
    "FromUserId": "User1",
    "RoomId": "Room1",
    "RoomName":"RoomName1",
    "DestroyDelayTime":3600,
    "Attributes": [
        {
            "Key":"k1",
            "Value":"v1",
            "AutoDelete": 0
        },
        {
            "Key":"k2",
            "Value":"v2",
            "AutoDelete": 1
        }
    ]
}
```


## 响应参数

响应参数如下所示

| 参数       | 类型   | 是否必选 | 描述                 |
|------------|--------|----------|----------------------|
| Code       | int32  | 是       | 返回状态码（ 0 表示成功）。 |
| Message    | string | 是       | 返回状态信息。         |
| RequestId  | string | 是       | 请求唯一标识。         |

## 响应示例
```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "req-123456789",
}
```
## 返回码

以下仅列出了接口业务逻辑相关的返回码，完整返回码请参考 [全局返回码](/zim-server/return-codes)。

| 返回码      | 说明         | 解决方案                                 |
| ----------- | ------------ | ---------------------------------------- |
| 660000002   | 参数错误。     | 请检查参数。                               |
| 660300005   | 频率限制。     | 请稍后再尝试。                             |
| 660300014   | 房间已存在。   | 检查房间是否已经创建。                   |
| 660300015   | 房间数超出上限。 | 检查房间数是否超出上限，或者联系技术支持扩容。 |
