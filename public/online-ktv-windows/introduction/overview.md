# 概述

---

在线 KTV 是社交娱乐场景下的新型互动玩法，通过歌曲把人与人连接起来，让沟通破冰变得更简单，有效提升平台用户停留时长。

## 玩法介绍

在线 KTV 玩法有很多种，按照形式主要由以下几种：

* 排麦独唱：观众上麦后可以进行点歌排麦等待，歌曲开始播放后即可进行独唱。

* 实时合唱：两名以上的观众对一首歌同时合唱。
* 串行合唱：合唱各方串行加入，共同合唱歌曲。	
* 热歌抢唱：用户可根据自己的爱好选择不同分类的歌曲房间，房间内随机播放音乐片段，房间内用户可随时抢麦，演唱歌曲高潮片段。
* 全民领唱：同一首歌分段并按照一定规则分配给主唱，主唱领唱一段后，会邀请麦上用户接唱下一段。
* 两人轮唱：两名观众上麦后对同一首歌进行分段轮唱。

丰富多样的K歌玩法可以让 APP 更好玩，吸引更多的用户。K歌玩法可以应用到各种各样的场景，如语聊房，相亲平台，直播间等。

|独唱/合唱|抢唱|
|-|-|
|<Frame width="512" height="700" ><img src="https://doc-media.zego.im/sdk-doc/Pics/ktv/ktv.jpg" /></Frame>|<Frame width="512" height="700" ><img src="https://doc-media.zego.im/sdk-doc/Pics/GoEnjoy/Grab/iOS/grab_grab_waiting.png" /></Frame>|


## 技术方案

:::if{props.platform=undefined}
<Frame width="auto" height="auto" ><img src="https://doc-media.zego.im/sdk-doc/Pics/ktv/ktv_overview.png" /></Frame>
针对不同玩法的特点，ZEGO 基于 Express SDK，提供多种方案供您选择：
:::
:::if{props.platform="Windows"}
针对不同玩法的特点，ZEGO 基于 Express SDK，提供多种方案供您选择：
:::

### 独唱方案

独唱，是指麦上用户自由点歌后进行排麦演唱，观众进入歌房倾听歌曲，打造一种沉浸式K歌娱乐体验。

:::if{props.platform=undefined}
此方案可以实现排麦独唱玩法，详见 [独唱方案](/online-ktv-windows/implementation/ktv-solutions/solo)。
:::

### 合唱方案

#### 实时合唱方案

在歌房中，麦上用户同时播放本地伴奏，同时开唱。其他用户可以中途加入合唱，对齐伴奏后开唱。低延迟实时合唱体验，真正实时合唱。服务器会对人声和伴奏精准进行对齐，保证观众收听体验。

实时方案优势：
* 超低延时耳返，避免走音跑调。
* 低延迟实时合唱体验，端到端延迟低至 70 ms，达到人体无感官延迟水平，用户可享受真正实时的体验。
* 多方伴奏精准同步，各端在同一时刻启动伴奏播放，打造优质的合唱体验。
* 服务端精准混流，各方合唱者声音和伴奏混音成一路流，通过 NTP 时间精准对齐各方演唱进度后混音。听众仅需拉一路流就能听到良好合唱效果，弱网体验佳。

:::if{props.platform=undefined}
此方案可以实现实时合唱玩法，详见 [实时合唱方案](/online-ktv-windows/implementation/ktv-solutions/chorus/concurrent)。
:::


#### 串行合唱方案

合唱各方串行加入，主唱推出一条流，包含了伴奏和人声，副唱跟着主唱的伴奏进行合唱，观众再拉由副唱发出的混流。此方案可以实现串行合唱玩法。

串行方案优势：
* 功能实现简单快速。
* 副唱合唱体验好。
* 观众端收听体验良好。

:::if{props.platform=undefined}
此方案可以实现串行合唱玩法，详见 [串行合唱方案](/online-ktv-windows/implementation/ktv-solutions/chorus/serial)。
:::

### 抢唱方案

抢唱，是一种兼具“唱歌+社交+游戏竞技”属性的K歌玩法，在一轮抢唱游戏中，会播放若干首歌曲的高潮片段供玩家抢麦，玩家获得麦权可开始演唱歌曲。

一轮抢唱游戏会播放若干首歌曲的高潮片段。播放一首歌曲高潮片段（原唱），并同时进入抢麦倒计时。倒计时结束后，玩家即可参与抢麦。当玩家抢到麦后，开始播放高潮片段的伴奏，抢麦者根据歌词和音高线进行演唱，其余玩家聆听歌声。当歌曲演唱完毕后，系统根据抢麦者演唱时的音准对本次演唱评分。评分结束后，进入下一首歌曲流程，一直循环直至一轮游戏结束。

KTV 抢唱方案是即构科技基于 ZegoExpressSDK 提供的音视频能力，以及 ZIM SDK 提供的可靠消息传输能力，参考业界抢唱流行玩法而形成的通用解决方案。基于 ZEGO 自有技术，KTV 抢唱方案还包含音速达提供的正版音乐词曲服务，以保证该方案在商业领域不会出现侵权问题。

:::if{props.platform=undefined}
此方案可以实现抢唱玩法，详见 [抢唱方案](/online-ktv-windows/implementation/ktv-solutions/grab-the-mic)。
:::


## 功能列表

| <div style={{width: "85px"}}>主要功能</div> | 功能描述 |
| --- | ---- |
|实时音频互动|麦下观众实时收听连麦观众和房主的音频内容，房主、连麦观众之间可互相进行音频沟通与互动。|
|房间管理|将多个在线的房间以列表形式进行实时展示，观众可以通过房间列表进入房间。|
|麦位管理|房主可对麦位进行控制，观众可以在麦位区进行上麦、下麦、换麦、闭麦操作，房间内所有用户都能看到每个麦位的实时状态。|
|劲歌热榜|提供包括古风、校园、民谣、嘻哈等多种歌单分类及网络红歌、最近飙升等热门动态榜单，快速打造平台音乐曲库。|
|点歌台|连麦观众可以通过歌曲列表进行点歌，所点的歌曲将会进入已点队列，按照点歌时间逐首依次播放。|
|曲库组件|海量正版音乐资源，支持搜索、获取、下载缓存歌曲和歌词资源，可自定义显示专辑名称/专辑封面/歌曲名称/歌手名称等信息。|
|播放组件|提供完善的媒体播放组件功能，支持开始/暂停/恢复/停止歌曲，切换原唱和伴奏，调节人声与伴奏音量等。|
|歌词组件|支持歌词与歌曲逐行/逐字同步展示，歌词可根据歌曲进度同步滚动，实时对齐。|
|混响|支持摇滚、录音棚、大教堂、音乐厅等多种类型的混响，结合歌曲伴奏进行推流，让 K 歌变得更加生动。|
|音效播放器|支持播放掌声、礼物特效提示、倒计时提示等音效，增强真实感，烘托场景氛围。|
|低延迟耳返|超低延迟耳返体验，开启耳返后，连麦观众在唱歌时可获得更好的反馈。|

## 优势

针对在线 KTV 场景，ZEGO提供了**海量正版曲库**，**九大场景化能力**，**高清音质**，**低延迟实时合唱体验**，**K歌配套功能和组件**，和丰富多样的**场景解决方案**，让开发者快速搭建在线 K 歌房。

### 海量正版曲库
* 提供百万量级的正版歌曲曲库，曲库覆盖各音乐平台各种排行榜等歌单，收录华语乐坛经典、热门流行、日韩欧美等歌曲。
* 同首歌资源支持多种高音质，支持原唱和伴奏多音轨，支持逐字、逐行歌词。
* 曲库根据市场变化动态更新，时刻保证歌曲数量和热度。
* 专业唱歌评分系统，覆盖海量主流歌曲。
* ZEGO SDK 一站式集成，无需单独对接版权 SDK。

### 九大场景化能力，极速搭建在线 K 歌房
- 支持点歌、歌曲下载缓存、歌曲播放、切歌、原唱/伴唱切换、变声音效等九大场景化能力，还原线下 KTV 场景。
- 提供场景化 API 接口和对应示例源码，逐字逐行歌词控件，评分控件，歌单控件等 K 歌配套功能和组件，方便开发者接入，快速搭建上线 K 歌房。

### 高清音质
- ZEGO 自研的音视频引擎，支持 48 kHz 全频带采样，通过成熟的 3A 技术和智能音频降噪算法，对声音进行回声消除、噪音抑制、音量增益，既能将空调、风扇等发出的噪音消除掉，又能不误伤音乐的原声，更好地还原音乐的细节。
- 为缩小因手机性能不同对音质产生的影响，ZEGO 针对不同型号的手机在算法上进行不断优化，以实现良好音质。
- 强大灵活的定制接口，支持自定义音效等高级功能，让声音更动听、有趣。

### 低延迟实时合唱体验
- 端到端延迟低至 70 ms，达到人体无感官延迟水平，全球用户均可享受真正实时的体验。
- 多方伴奏精准同步，各端在同一时刻启动伴奏播放，打造优质的合唱体验。
- 服务端精准混流，各方合唱者声音和伴奏混音成一路流，通过 NTP 时间精准对齐各方演唱进度后混音。听众仅需拉一路流就能听到良好合唱效果，弱网体验佳。

## 平台支持

| 平台                                                                         | SDK  | 兼容性                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ---------------------------------------------------------------------------- | ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [Android](https://doc-zh.zego.im/online-ktv-android/introduction/overview)   | 支持 | Android 4.4 或以上版本                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [iOS](https://doc-zh.zego.im/online-ktv-ios/introduction/overview)           | 支持 | iOS 12.0 或以上版本                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [Windows](https://doc-zh.zego.im/online-ktv-windows/introduction/overview)   | 支持 | Windows 7 或以上版本。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [Linux](https://doc-zh.zego.im/online-ktv-linux/introduction/overview)       | 支持 | 任意具有 GLIBC 2.16 或以上版本的 Linux 发行版系统，支持 x86_64、aarch64、armhf、armel 架构。                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [Web](https://doc-zh.zego.im/online-ktv-web/introduction/overview)           | 支持 | 请参考 [限制说明 - 浏览器兼容性和已知问题](https://doc-zh.zego.im/article/12047)。                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [Flutter](https://doc-zh.zego.im/online-ktv-flutter/introduction/overview)   | 支持 | <ul><li>Flutter 2.0 或以上版本</li><li>iOS 12.0 或以上版本</li><li>Android 4.4 或以上版本</li><li>Windows 8 或以上版本</li><li>Web： Chrome 58 或以上版本、Firefox 56 或以上版本、Safari 11 或以上版本、Opera 45 或以上版本、QQ 浏览器 Windows 10.1 或以上版本/macOS 4.4 或以上版本、360 安全浏览器极速模式</li><li>Debian（Linux） 10 或以上版本</li><li>Ubuntu（Linux）支持版本 20.04 LTS、22.04 LTS、24.04 LTS</li></ul>                                                                                                                      |
| [Electron](https://doc-zh.zego.im/online-ktv-electron/introduction/overview) | 支持 | <ul><li>Electron 7.0.0 或以上版本</li><li>Windows 7 及以上 / macOS 10.13 及以上操作系统</li><li>Linux 支持 x86_64、aarch64、armhf 架构的 Linux 操作系统，如需使用 Linux 平台，请联系 ZEGO 技术支持。</li></ul>                                                                                                                                                                                                                                                                                                                                   |
| [Unity3D](https://doc-zh.zego.im/online-ktv-u3d/introduction/overview)    | 支持 | <ul><li>Unity 2018.4.21f1 或以上版本</li><li>Android：Android 4.4 或以上版本</li><li>iOS：Xcode 15.0 或以上版本，iOS 12.0 或以上版本</li><li>macOS：macOS 10.13 或以上版本</li><li>Windows：Windows 7 或以上版本</li><li>Linux：任意具有 GLIBC 2.16 或以上版本的 Linux 发行版系统（目前仅支持 x86_64 架构），libasound（ALSA），libv4l2（v4l utils），CMake 3.7 或以上版本</li><li>WebGL：浏览器需要支持 WebGL 以及 WebAssembly（推荐使用 WebGL 2.0），Chrome 57 或以上版本、Firefox 56 或以上版本、Safari 11 或以上版本，不支持移动端</li></ul> |
| [React Native](https://doc-zh.zego.im/online-ktv-rn/introduction/overview) | 支持 | <ul><li>React Native 0.60.0 或以上版本</li><li>iOS 12.0 或以上版本</li><li>Android 4.4 或以上版本</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                      |
<Content platform="Windows"/>