# 实现流程

- - -

本文主要介绍 ZIM 内置内容审核的实现流程，包含服务开通和运行。

## 开通服务

ZIM 支持您在 [ZEGO 控制台](https://console.zego.im/) 自助开通所需的审核服务，开通流程如下：

<Note title="说明">

- 如果您无法自助开通服务，可联系 ZEGO 技术支持进行人工开通。
- 内容审核服务开通 7 天内免费，开通服务的第 8 个自然日起会按量计费。建议您在接入完 ZIM 后，测试阶段再申请开通内容审核服务。
</Note>

### 1 创建数美审核账号

进入 <a href="https://console.zego.im/cloudMarket/openProductionDetail/shumei" target="_blank">ZEGO 控制台 &gt; 云市场 &gt; 数美内容审核</a> 产品详情页。填写表单，创建数美账号。

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/console/cloud_market/info.jpeg" /></Frame>

创建表单所需字段说明如下表所示：

<table>

<tbody><tr>
<th>字段</th>
<th>描述</th>
<th>用途</th>
</tr>
<tr>
<td>公司全称</td>
<td>默认取 <a href="https://doc-zh.zego.im/article/14277" target="_blank">实名认证</a> 主体名称，支持编辑。</td>
<td>-</td>
</tr>
<tr>
<td>账号邮箱</td>
<td>默认取 ZEGO 控制台账号绑定邮箱。支持编辑，编辑后需验证码校验。</td>
<td>用于登录数美运营后台和判断客户是否重复。</td>
</tr>
<tr>
<td>邮箱验证码</td>
<td>编辑“账号邮箱”后，邮箱收到的验证码。</td>
<td>用于验证邮箱是否正确。</td>
</tr>
<tr>
<td>所在行业</td>
<td>选项为“社交交友”、“在线教育”、“电商平台”、“游戏”，默认为“社交交友”。</td>
<td>用于数美配置默认审核策略。</td>
</tr>
<tr>
<td>业务区域</td>
<td>选项为“国内”、“海外”。</td>
<td>用于将新建数美账号关联到您的 ZEGO 国内/海外主账号下，无关计费。</td>
</tr>
</tbody></table>

### 2 开通 ZIM 内容审核服务，配置审核策略

在完成数美账号创建后，即可进入内容审核服务开通页面。

在此页面，选择需要开通服务的 AppID，选择需要开通的服务为“ZIM 内容审核”，并完成配置。

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/ZIM/Moderation/ForZIM.jpeg" /></Frame>

您在 ZEGO 控制台对 ZIM 的内容审核进行以下配置：
<table>

<tbody><tr>
<th>配置项</th>
<th>是否必选</th>
<th>说明</th>
</tr>
<tr>
<td>审核水平</td>
<td>是</td>
<td>审核水平影响 ZIM 在收到“不确定”的审核结果时，是否继续发送消息。包含以下选项（单选）：<ul><li>弱审核：审核结果为“不确定”时，ZIM 将依旧发送此条消息。</li><li>强审核：审核结果为“不确定”时，ZIM 将停止发送此条消息。</li></ul></td>
</tr>
<tr>
<td>审核语言</td>
<td>是</td>
<td>支持对以下语言进行审核（单选）：<ul><li>中文。</li><li>英文。</li><li>阿拉伯语。</li><li>自定义识别语言：自动识别语言，并进行审核。目前支持自动识别以下语言：<ul><li>中文。</li><li>英文。</li><li>阿拉伯文。</li><li>印地语。</li><li>西班牙语。</li><li>法语。</li><li>俄罗斯语。</li><li>葡萄牙语。</li><li>印尼语。</li><li>德语。</li><li>日语。</li><li>土耳其语。</li><li>越南语。</li><li>意大利语。</li><li>泰语。</li><li>菲律宾语。</li><li>韩语。</li><li>马来语。</li></ul></li></ul></td>
</tr>
<tr>
<td>文本审核</td>
<td>是</td>
<td>目前固定为“默认策略”，即对涉政、暴恐、违禁、色情、辱骂、广告、隐私、广告法等内容进行审核。如需调整，请联系 ZEGO 技术支持。</td>
</tr>
<tr>
<td>图片审核</td>
<td>是</td>
<td>目前固定为“默认策略”，即对含涉政，色情，暴恐，二维码识别，广告等内容进行审核，并可支持图片中文字违规识别。如需调整，请联系 ZEGO 技术支持。</td>
</tr>
</tbody></table>

下列配置项仅支持联系 ZEGO 技术支持修改：

<table>

<tbody><tr>
<th>配置项</th>
<th>说明</th>
</tr>
<tr>
<td>语音审核</td>
<td>目前固定为“默认策略”，即对含涉政，色情，暴恐等内容进行审核，并可支持广告，违禁，辱骂等违规识别，如需调整，请联系 ZEGO 技术支持进行操作。</td>
</tr>
<tr>
<td>视频审核</td>
<td>视频审核分为视频中 <strong>图像</strong> 和 <strong>音频</strong> 两方面内容的审核。目前固定为“默认策略”。
<ul><li>图像：默认包含涉政，色情，暴恐等相关违规内容审核，并可以支持二维码识别，暴恐，图像中文字等违规识别。如需调整，请联系 ZEGO 技术支持进行操作。</li><li>音频：默认包含涉政，色情，暴恐等相关违规内容审核，并可支持广告，违禁，辱骂等违规识别。</li></ul>
如需调整，请联系 ZEGO 技术支持进行操作。</td>
</tr>
</tbody></table>

<Note title="说明">

请根据您的业务特点选择对应的审核水平和审核策略。
</Note>


### 3 服务开通成功，查看指定项目审核服务详情

完成配置后，前往项目的“服务配置”页面，在“服务配置”选择“即时通讯”，即可查看对应服务所关联的“数美内容审核”配置详情，也可以修改审核配置。

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/ZIM/Moderation/select_zim.jpeg" /></Frame>

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/console/cloud_market/check_ZIM.jpeg" /></Frame>


## 运行阶段

完成上述服务开通，即可直接使用 ZIM 内置的内容审核服务。

当用户在发送消息时，ZIM 会根据对应消息来源（单聊、群聊、房间）的审核策略、尺度和强度审核消息，并根据审核结果实现相关业务的操作。

如果消息因审核导致发送失败，您会获得错误码 6000221 。您可以据此执行相关的业务操作。

如需调整审核策略，请联系 ZEGO 技术支持。审核策略配置要点如下所示：
- **针对消息的不同来源自定义审核策略**：目前 ZIM 支持针对消息来源设置不同的审核策略。例如，您在单聊和群聊场景中使用 ZIM，您可以根据“单聊”和“群聊”两个来源的信息设置不同的审核尺度，满足您业务需要，详情请参考 [能力概述 - 内置审核功能](/zim-uniapp-x/guides/content-moderation/overview#内置审核功能)。)。
- **审核强度会影响 ZIM 根据审核结果对消息的处理**：一般消息经过审核后会返回 “**通过**”，“**不确定**”，“**不通过**” 三种结果。
    - 如果您设置的审核水平是 **弱审核**：审核结果为“不确定”时，ZIM 将依旧发送此条消息。
    - 如果您设置的审核水平是 **强审核**：审核结果为“不确定”时，ZIM 将停止发送此条消息。您可以根据业务需要设置对应的审核水平。
- **选择先发后审还是先审后发**：在单聊、群聊会话发送图片消息时，您可以根据业务实际需要选择“先发后审”或“先审后发”，最大可能地应对您业务中对消息即时性的要求。其他类似的限制有：
    - 文本消息仅支持“先审后发”
    - 由于 ZIM 不存储房间内的消息，为了最大可能保证消息的安全合规，房间中的文本和图片仅支持“先审后发”。
    - 语音和视频消息，由于其文件大小和使用场景的特殊性，存在较长的审核时延，ZIM 默认使用“先审后发”这一种模式。


<Content />